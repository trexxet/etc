# Git Manual for Phystechs

## Что это вообще такое и почему мне это нужно?
**Система контроля версий** — это система, регистрирующая изменения в файлах с тем, чтобы в дальнейшем была возможность вернуться к определённым старым версиям этих файлов. Кроме того, эта система значительно упрощает совместную разработку проектов, распространение исходного кода и т.д.

Представьте, что вы написали функцию, которая загружает какой-то текст из файла. В это же время ваш товарищ написал функцию, которая записывает в выходной файл результат работы программы. <br>
Какие есть в такой ситуации варианты объединить результаты ваших трудов? Принести код на флешке, скинуть файл с исходником через вк, потом кто-то из вас вручную их объединяет и скидывает результат обратно? А если вас ТРОЕ? Система контроля версий же позволяет централизовать весь процесс разработки и упрощает объединение изменений, сделанных различными программистами *(девелоперами)*

Или, например, вы всю ночь трудились над решением какой-то задачи. Затем вы выспались, посмотрели на то, что вы написали, и решили вернуться к прошлому варианту и начать с него снова. В такой ситуации как раз пригодится возможность разделять процесс разработки на этапы *(коммиты и ветки)* и свободно перемещаться между ними.

Есть различные системы контроля версий, но подавляющее большинство проектов использует **git**, т.к. на данный момент это самая удобная и мощная система по сравнению с остальными.

**Короче говоря, GIT - круто!**

## Репозитории и GitHub
**Репозиторий** - место, где хранятся и поддерживаются какие-либо данные. Другими словами, это хранилище вашего кода и сопутствующей информации, например, документации.

Git работает с репозиториями. Все изменения фиксируются внутри какого-то одного репозитория. А репозиторий должен где-то храниться. Вообще git хранит репозитории локально, т.е. все действия вы можете проводить на своем компьютере. Но если вы желаете показать ваше творение всему миру, то нужна площадка, на которой вы можете разместить ваш репозиторий. Тут-то и всплывает **GitHub**. *(Следует отметить, что GitHub - не единственная онлайн-платформа для хостинга репозиториев. Есть и другие, например, GitLab, BitBucket и т.д. GitHub же пользуется большей популярностью, и активно используется в различных проектах в МФТИ, поэтому в данном мануале ограничимся им.)*

С помощью гитхаба можно иметь удаленную копию вашего репозитория, вести совместную работу над одним проектом, делиться кодом, приглашать других пользователей принять участие в работе и т.д. Короче, просто и удобно.

**GitHub != git!!!** <br>
git - это система контроля версий, GitHub - это онлайн-платформа, использующая git. Следует не путать их.

## Коммиты и ветки
Работа над более-менее приличным проектом, как правило, разделена на различные задачи, например, реализовать поворот плоскости, реализовать зум камеры, добавить чтение конфигурации из файла и т.д. Чтобы одна задача не мешала другой, были придуманы *ветки (branches)* - такие своеобразные подрепозитории, в которых можно вносить изменения, не затрагивая другие ветки, в которых, например, кто-нибудь другой решает свои задачи. После того, как вы решили поставленную задачу, вашу ветку можно *объединить (merge)* с другой, как правило, *основной веткой (master branch)*. В данном мануале основы ветвления и слияния рассматриваться не будут, т.к. это довольно большая тема, и при желании можете изучить её в официальном мануале, ссылка на который будет в конце.

Изменения в репозитории фиксируются *коммитами (commits)* - снимками состояния репозитория. Фактически, коммит является основной опорной точкой git. Он должен иметь описание, краткое, обезличенное и исчерпывающее. Например, если вы написали стек, то "I done stack" - плохое описание коммита (да, такое встречалось). А хорошим было бы "Stack implementation". Если у вас плохо с английским и не можете придумать название для коммита - подтяните его, т.к. весь обмен информацией в IT-среде ведется на английском языке.

## Создание репозитория на GitHub
Процесс регистрации на http://github.com простой и в комментариях не нуждается. После регистрации вас ждет примерно такая картина:
<br> ![](https://i.imgur.com/TfzVTxv.png) <br>

Нажимаем на иконку в правом верхем углу и выбираем Settings:
<br> ![](https://i.imgur.com/HzLkOEG.png) <br>

Вписываем свое имя, чтобы вас можно было идентифицировать:
<br> ![](https://i.imgur.com/hITd3wV.png) <br>

Затем жмем в правом верхнем меню Your profile и переходим на вкладку Repositories:
<br> ![](https://i.imgur.com/JPTtRWS.png) <br>

Жмем зеленую кнопку New, вводим имя репозитория, ставим галку "Initialize this repository with a README" и создаем репозиторий:
<br> ![](https://i.imgur.com/XUQjam3.png) <br>

Любуемся девственно чистым репозиторием, затем справа жмем "Clone or download" и видим адрес нашего репозитория. Можно даже скопировать его.
<br> ![](https://i.imgur.com/11QhZJT.png) <br>

После этого можно на некоторое время забыть о гитхабе. Теперь поставим git на компьютер.

## Установка и настройка Git
Возможны 3 варианта:
1. Вы используете Linux. В таком случае вам крупно повезло, т.к. установка и использование git будет для вас абсолютно безболезненным *(если вы умеете пользоваться терминалом, а если нет - придётся научиться)* <br>
В зависимости от вашего дистрибутива выполняем либо `apt-get install git`, либо `yum install git-core`, либо `pacman -S git`, либо какой у вас там пакетный менеджер стоит. И всё, git установлен.
2. Вы используете Mac. Тогда следуем [этой](http://sourceforge.net/projects/git-osx-installer/
) инструкции.
3. Вы используете Windows. Что тут сказать, вам не повезло. Программировать под Windows - вообще не самый удобный процесс, и лучше как можно быстрей перейти на линукс. Ставим git [отсюда](http://msysgit.github.com/).

Затем git нужно настроить, а именно - задать имя и адрес почты, которые будут использоваться для коммитов. <br>
Линуксобоги и макоюзеры вводят в терминал `git config --global user.name "Имя Фамилия"`, затем `git config --global user.email емейл`. <br>
Пользователи винды же сначала открывают Git Shell либо через Пуск, либо через рабочий стол, и затем вводят то же самое. Лучше держать Git Shell под рукой, т.к. он заменяет юниксовый терминал в винде.

**Далее в мануале все команды выполняются в терминале либо Git Shell.**

## Работа с репозиторием
Для начала клонируем репозиторий с гитхаба себе:
```
$ git clone скопированный_из_гитхаба_адрес_репозитория
```
В случае успеха git ответит чем-то подобным:
```
Cloning into 'iLab'...
remote: Counting objects: 3, done.
remote: Total 3 (delta 0), reused 0 (delta 0), pack-reused 0
Unpacking objects: 100% (3/3), done
```

Затем пишем программу как обычно: создаем файлы, пишем, собираем, тестируем, и т.д. Если же у вас уже есть какой-то код, то можно просто скопировать файлы в папку с репозиторием. Когда почувствуете, что изменений в коде уже достаточно для их фиксации (запилили какую-нибудь фичу, пофиксили что-то), то делаем коммит. <br>
Сначала проверяем текущие изменения:
```
$ git status
On branch master
Your branch is up-to-date with 'origin/master'.
Untracked files:
  (use "git add <file>..." to include in what will be committed)

        example.c

nothing added to commit but untracked files present (use "git add" to track)
```
Видим, что у нас изменен файл `example.c`, но git пока не считает его кандидатом для коммита. Заставим его изменить мнение:
```
$ git add example.c
$ git status
On branch master
Your branch is up-to-date with 'origin/master'.
Changes to be committed:
  (use "git reset HEAD <file>..." to unstage)

        new file:   example.c
```
Сделаем коммит:
```
$ git commit -m "Brief description of the changes made"
[master b352f69] Brief description of the changes made
 1 file changed, 6 insertions(+)
 create mode 100644 example.c
```
Коммит сделан, теперь мы можем продолжить работу над кодом, или отправить его на гитхаб. Для этого git попросит указать логин и пароль от аккаунта на гитхабе:
```
$ git push
Username for 'https://github.com': trexxet
Password for 'https://trexxet@github.com':
Counting objects: 3, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (3/3), 361 bytes | 0 bytes/s, done.
Total 3 (delta 0), reused 0 (delta 0)
To https://github.com/trexxet/iLab.git
   e5e32a4..b352f69  master -> master
```

После этого можно зайти на сайт и убедиться, что коммит на месте.
<br> ![](https://i.imgur.com/HryXuXf.png) <br>
Видим появившийся файл `example.c`, описание последнего коммита и его автора, а так же увеличившееся число коммитов. Нажав на него, можно посмотреть на всю историю коммитов в данной ветке:
<br> ![](https://i.imgur.com/bwkrZk1.png) <br>
Выбрав один из коммитов, можно посмотреть, какие изменения были в нём внесены:
<br> ![](https://i.imgur.com/7XCtCF9.png) <br>

Теперь "продолжим" работу над программой. Внесли новые изменения, проверили, собираемся коммитить. Можно посмотреть, чем текущий вариант отличается от последнего закоммиченного:
```
$ git diff
diff --git a/example.c b/example.c
index 2271acd..2a0cb0a 100644
--- a/example.c
+++ b/example.c
@@ -1,6 +1,6 @@
 #include <stdio.h>

 int main() {
-       printf ("Sample text\n");
+       printf ("The pizza is agressive!\n");
        return 0;
 }
```
Когда допишите изменения, то повторяем деёствия: проверяем с `git status`, добавляем файл в коммит с `git add example.c`, коммитим с `git commit -m "Warning about pizza"` и отправляем с `git push`.

Если же у вас что-то пошло не так, и вы желаете вернуть какой-то файл к состоянию прошлого коммита, то выполните
```
$ git checkout имя_файла
```

Если в удаленный репозиторий (например, на том же гитхабе), были внесены какие-либо изменения, которых нет в вашем локальном репозитории, то вы можете обновить его при помощи команды
```
$ git pull
```

Собственно, это практически всё, что нужно для использования в простом репозитории с одной веткой.

## .gitignore
Есть подозрения, что в процессе написания кода вы пробовали его скомпилировать, и скорее всего, у вас в папке с проектом лежит исполняемый файл, и, возможно, какие-то файлы, созданные программой. Нужны ли они в репозитории? Конечно же нет.

В git есть возможность игнорировать файлы. Для этого создадим в папке с проектом файл .gitignore, и в нём укажем какие файлы git должен игнорировать:
```
a.out
out.txt
```
После этого можно с помощью `git status` убедиться, что git игнорирует укзаанные файлы. Не забудьте добавить .gitignore в следующий коммит.

## Добавление разработчика
На гитхабе есть возможность добавить какого-либо разработчика к вашему репозиторию. Например, вы решили задание и хотите, чтобы ваш преподователь/ментор/товарищ/вымышленный друг проверил его. Для этого откройте настройки репозитория:
<br> ![](https://i.imgur.com/nHySS3g.png) <br>
Слева нажмите "Collaborators" и введите логин того, кого хотите добавить. Например, если хотите добавить И.Р. Дединского, то введите ded32:
<br> ![](https://i.imgur.com/PYJWqmK.png) <br>
Затем нажмите "Add collaborator". После этого юзер получит уведомление о том, что вы его пригласили в свой репозиторий:
<br> ![](https://i.imgur.com/vsuqbzo.png) <br>

## Заключение
Надеюсь, что данный мануал поможет вам разобраться, как пользоваться git'ом и GitHub'ом на базовом уровне. В мануале не покрыто и десятой доли всех возможностей git, поэтому крайне рекомедуется изучить [официальный мануал](https://git-scm.com/book/ru/v2) (который имеется даже в русском переводе).

*Удачи и всех благ вам ежже*

*[trexxet](https://github.com/trexxet), 2017*
